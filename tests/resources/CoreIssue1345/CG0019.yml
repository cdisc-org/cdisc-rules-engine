# Variable: GEN
# Condition:
# Rule: Each record is unique per sponsor defined key variables as documented in the define.xml
# Marcelina Hungria: testing with the CLI and a define.xml that includes a key from a supp dataset (ec/suppec),
#   plus dm/suppdm and relrec
Authorities:
  - Organization: CDISC
    Standards:
      - Name: SDTMIG
        References:
          - Citations:
              - Cited Guidance:
                  Note that the key variables shown in this table are examples
                  only. A sponsor's actual key structure may be different.
                Document: IG v3.4
                Section: Table 3.2.1
              - Cited Guidance:
                  Since the purpose of this column is to aid reviewers in
                  understanding the structure of a dataset, sponsors should list
                  all of the natural keys (see definition below) for the
                  dataset. These keys should define uniqueness for records
                  within a dataset, and may define a record sort order. The
                  identified keys for each dataset should be consistent with the
                  description of the dataset structure as described in the
                  Define-XML document.
                Document: IG v3.4
                Section: 3.2.1.1
            Origin: SDTM and SDTMIG Conformance Rules
            Rule Identifier:
              Id: CG0019
              Version: "1"
            Version: "2.0"
        Version: "3.4"
      - Name: SDTMIG
        References:
          - Citations:
              - Cited Guidance:
                  Table 3.2.1[Note that the key variables shown in this table are
                  examples only. A sponsor's actual key structure may be
                  different.]|3.2.1.1[Since the purpose of this column is to aid
                  reviewers in understanding the structure of a dataset,
                  sponsors should list all of the natural keys (see definition
                  below) for the dataset. These keys should define uniqueness
                  for records within a dataset, and may define a record sort
                  order.]
                Document: IG v3.2
                Section: Table 3.2.1|3.2.1.1
            Origin: SDTM and SDTMIG Conformance Rules
            Rule Identifier:
              Id: CG0019
              Version: "1"
            Version: "2.0"
        Version: "3.2"
      - Name: SDTMIG
        References:
          - Citations:
              - Cited Guidance:
                  Table 3.2.1[Note that the key variables shown in this table are
                  examples only. A sponsor's actual key structure may be
                  different.]||3.2.1.1[Since the purpose of this column is to
                  aid reviewers in understanding the structure of a dataset,
                  sponsors should list all of the natural keys (see definition
                  below) for the dataset. These keys should define uniqueness
                  for records within a dataset, and may define a record sort
                  order.]
                Document: IG v3.3
                Section: Table 3.2.1|3.2.1.1
            Origin: SDTM and SDTMIG Conformance Rules
            Rule Identifier:
              Id: CG0019
              Version: "1"
            Version: "2.0"
        Version: "3.3"
Check:
  all:
    - name: define_dataset_key_sequence
      operator: is_not_unique_set
Core:
  Id: CDISC.SDTMIG.CG0019
  Status: Draft
  Version: "1"
Description: Trigger error if records are not unique as per sponsor defined key
  variables as documented in the define.xml
Executability: Fully Executable
Match Datasets:
  - Is Relationship: true
    Keys:
      - USUBJID
    Name: SUPP--
Outcome:
  Message: Records are not unique as per sponsor defined key variables as
    documented in the define.xml
  # define_dataset_key_sequence doesn't appear to grab all variables needed. See define xml plus data included
  Output Variables:
    - define_dataset_key_sequence
Rule Type: Dataset Contents Check against Define XML
Scope:
  Classes:
    Include:
      - ALL
  Domains:
    Include:
      - ALL
Sensitivity: Record
